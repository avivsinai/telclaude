# ═══════════════════════════════════════════════════════════════════════════════
# Telclaude Docker Environment Variables
#
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# ═══════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────────
# Required
# ─────────────────────────────────────────────────────────────────────────────────

# Telegram bot token from @BotFather
TELEGRAM_BOT_TOKEN=your_bot_token_here

# Path to your projects folder (where Claude will work)
#
# Windows examples:
#   WORKSPACE_PATH=/c/Users/YourName/Projects
#   WORKSPACE_PATH=//c/Users/YourName/Projects  (older Docker syntax)
#
# WSL2 examples:
#   WORKSPACE_PATH=/mnt/c/Users/YourName/Projects
#   WORKSPACE_PATH=/home/youruser/projects
#
WORKSPACE_PATH=/mnt/c/Users/YourName/Projects

# TOTP encryption key for 2FA secrets
# Generate with: openssl rand -base64 32
# IMPORTANT: Keep this safe! If lost, all 2FA secrets become unrecoverable.
TOTP_ENCRYPTION_KEY=GENERATE_WITH_openssl_rand_-base64_32

# Shared secret for internal relay ↔ agent RPC (HMAC auth)
# Generate with: openssl rand -hex 32
TELEGRAM_RPC_SECRET=GENERATE_WITH_openssl_rand_-hex_32
# Optional (reserved for Moltbook agent when enabled)
# MOLTBOOK_RPC_SECRET=GENERATE_WITH_openssl_rand_-hex_32

# ─────────────────────────────────────────────────────────────────────────────────
# Optional
# ─────────────────────────────────────────────────────────────────────────────────

# Anthropic API key (alternative to claude login)
# If not set, you'll need to run `claude login` inside the container
# ANTHROPIC_API_KEY=sk-ant-...

# Log level: debug, info, warn, error
TELCLAUDE_LOG_LEVEL=info

# Network firewall (REQUIRED for Docker mode - containers run without SDK sandbox)
# Set to 1 to enable, requires --cap-add=NET_ADMIN
# SECURITY: Without firewall, Bash commands can reach arbitrary endpoints including cloud metadata
TELCLAUDE_FIREWALL=1

# Firewall DNS retry settings (internal host resolution)
# Controls how long we wait for telclaude/telclaude-agent to resolve at startup
# TELCLAUDE_FIREWALL_RETRY_COUNT=10
# TELCLAUDE_FIREWALL_RETRY_DELAY=2

# IPv6 fail-closed behavior
# If IPv6 is enabled and ip6tables is unavailable, refuse to start (recommended)
# Set to 0 only if you intentionally allow unfiltered IPv6 egress
# TELCLAUDE_IPV6_FAIL_CLOSED=1

# TESTING ONLY: Bypass firewall requirement (NEVER use in production!)
# Allows containers to start without firewall. Logged to audit log.
# TELCLAUDE_ACCEPT_NO_FIREWALL=1

# Internal RPC allowlist for firewall (comma-separated service hostnames).
# Defaults to: telclaude,telclaude-agent
# TELCLAUDE_INTERNAL_HOSTS=telclaude,telclaude-agent

# ─────────────────────────────────────────────────────────────────────────────────
# Secrets Encryption (for secure API key storage)
# ─────────────────────────────────────────────────────────────────────────────────

# Encryption key for storing secrets (OpenAI key, etc.)
# With TOTP enabled: automatically uses TOTP_ENCRYPTION_KEY
# Without TOTP: set this to enable `telclaude setup-openai`
# Generate with: openssl rand -base64 32
# SECRETS_ENCRYPTION_KEY=YOUR_KEY_HERE

# ─────────────────────────────────────────────────────────────────────────────────
# API Keys (tier-based sandbox exposure)
# ─────────────────────────────────────────────────────────────────────────────────
# Keys are exposed only for FULL_ACCESS tier.
# READ_ONLY and WRITE_LOCAL never get keys exposed.
# In split Docker mode, keys stay in the relay container (agent does not see them).
#
# Option 1 (RECOMMENDED): Secure encrypted storage
#   docker exec -it telclaude telclaude setup-openai   # OpenAI key
#   docker exec -it telclaude telclaude setup-git      # GitHub credentials
#   (Requires SECRETS_ENCRYPTION_KEY or TOTP_ENCRYPTION_KEY)
#
# Option 2: Environment variables (simpler, less secure)
# OPENAI_API_KEY=sk-proj-...
# GITHUB_TOKEN=github_pat_...
# GH_TOKEN=...

# ─────────────────────────────────────────────────────────────────────────────────
# Git Bot Account (recommended for automated commits)
# ─────────────────────────────────────────────────────────────────────────────────
# Create a dedicated GitHub bot account for telclaude:
#   1. Create account at github.com/signup (e.g., 'myproject-bot')
#   2. Generate fine-grained PAT: https://github.com/settings/tokens?type=beta
#      Scopes: Contents (read/write), Pull requests (read/write)
#   3. Configure: docker exec -it telclaude telclaude setup-git
#
# Or via env vars:
# GIT_USERNAME=myproject-bot
# GIT_EMAIL=myproject-bot@users.noreply.github.com
# GITHUB_TOKEN=github_pat_...
#
# Test: docker exec -it telclaude telclaude git-test
